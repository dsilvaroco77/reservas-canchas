<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCTenis</title>

    <meta name="theme-color" content="#111111"/>
    <link rel="manifest" href="manifest.json">
    
    <style>
        :root {
            --background-color: #111;
            --text-color: #f5f5f7;
            --subtle-text-color: #a1a1a6;
            --accent-color: #007aff;
            --card-background: rgba(35, 35, 35, 0.5);
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 0; background-color: var(--background-color); color: var(--text-color); overflow-x: hidden; }
        .main-container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; animation: fadeIn 1s ease-out forwards; }
        header { text-align: center; margin-bottom: 60px; }
        header h1 { font-size: 48px; font-weight: 700; margin: 0; letter-spacing: -1px; }
        header .date-today { font-size: 18px; color: var(--subtle-text-color); font-weight: 500; margin-top: 8px; }
        .mobile-instruction { display: none; }
        .complex-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 50px; margin-bottom: 60px; }
        .complex-wrapper { text-align: center; }
        .complex-title { margin-bottom: 15px; }
        .complex-title h2 { font-size: 28px; font-weight: 600; margin: 0 0 5px 0; }
        .complex-title p { font-size: 16px; color: var(--subtle-text-color); margin: 0; }
        .complex-card { position: relative; width: 100%; padding-top: 60%; background-size: cover; background-position: center; border-radius: 24px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1); }
        .clickable-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; z-index: 2; }
        .court-link-zone { flex: 1; height: 100%; transition: background-color 0.3s ease; display: flex; justify-content: center; align-items: center; text-decoration: none; }
        .court-link-zone:hover { background-color: rgba(255, 255, 255, 0.15); backdrop-filter: blur(2px); }
        .zone-text { color: white; font-size: 20px; font-weight: 700; text-shadow: 0 2px 8px rgba(0,0,0,0.9); text-align: center; padding: 10px; opacity: 0; transition: opacity 0.3s ease; pointer-events: none; }
        .court-link-zone:hover .zone-text { opacity: 1; }
        .info-section { background-color: var(--card-background); border-radius: 24px; padding: 30px; margin-bottom: 60px; }
        .section-title { font-size: 28px; font-weight: 600; margin-top: 0; margin-bottom: 5px; color: var(--text-color); }
        .smart-suggestion { font-size: 16px; color: var(--accent-color); font-weight: 500; margin-bottom: 25px; min-height: 24px;}
        .forecast-container { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 20px; }
        .forecast-container::-webkit-scrollbar { display: none; }
        .forecast-container { -ms-overflow-style: none; scrollbar-width: none; }
        .forecast-day { flex: 0 0 110px; background: rgba(30, 30, 30, 0.75); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 18px; padding: 15px; text-align: center; }
        .forecast-day span { display: block; font-size: 14px; font-weight: 500; margin-top: 5px; }
        .weather-icon-emoji { font-size: 36px; line-height: 1; margin: 8px 0; }
        footer { text-align: center; padding: 0 20px 40px; color: var(--subtle-text-color); }
        .tennis-message { font-size: 22px; font-style: italic; max-width: 700px; margin: 0 auto 30px; line-height: 1.5; }
        
        /* --- NUEVO: Estilo para el Consejo Ir√≥nico --- */
        .ironic-tip {
            font-size: 16px;
            font-style: italic;
            color: var(--subtle-text-color);
            max-width: 700px;
            margin: 20px auto 30px auto;
            line-height: 1.5;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border-left: 3px solid var(--accent-color);
        }

        .footer-links a { color: var(--subtle-text-color); background-color: var(--card-background); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 10px 20px; text-decoration: none; margin: 0 10px; transition: color 0.3s, background-color 0.3s; }
        .footer-links a:hover { background-color: var(--accent-color); color: white; border-color: var(--accent-color); }
        .small-note { margin-top: 30px; font-size: 14px; max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.6; }
        @media (max-width: 768px) { 
            .main-container { padding: 20px 15px; } 
            header { margin-bottom: 40px; } 
            header h1 { font-size: 36px; } 
            header .date-today { font-size: 16px; } 
            .mobile-instruction { display: block; text-align: center; color: var(--subtle-text-color); margin-bottom: 30px; font-style: italic; } 
            .complex-grid { grid-template-columns: 1fr; gap: 40px;} 
            .info-section { padding: 25px; } 
            .section-title { font-size: 24px; } 
            .tennis-message { font-size: 18px; } 
            .ironic-tip { font-size: 14px; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <header>
            <h1>Canchas de Tenis UCT</h1>
            <div class="date-today" id="dateToday"></div>
        </header>
        <main>
            <p class="mobile-instruction">Pincha en la cancha que deseas reservar.</p>
            <div class="complex-grid">
                <div class="complex-wrapper">
                    <div class="complex-title">
                        <h2>Complejo CEC</h2>
                        <p>Canchas de Arcilla</p>
                    </div>
                    <div class="complex-card" style="background-image: url('cec.jpg');">
                        <div class="clickable-overlay">
                            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ1pS98lJc9AnurRJsrrFELO8p7lFqT8SE5tpaJPiVixBHN83PpSWM4oqIfom2EAtwcVqooJYG7K?gv=true" target="_blank" class="court-link-zone" aria-label="Reservar Cancha CEC 1"><span class="zone-text">Reserva Cancha CEC 1</span></a>
                            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ1ijnDghWGh6GVpsD6Q76qxlJqEdDhj9E0MvboyNI_rTAkbn0JfXE3qFoYECfCMjyEPSGpaTRk4?gv=true" target="_blank" class="court-link-zone" aria-label="Reservar Cancha CEC 2"><span class="zone-text">Reserva Cancha CEC 2</span></a>
                        </div>
                    </div>
                </div>
                <div class="complex-wrapper">
                    <div class="complex-title">
                        <h2>Complejo CJP</h2>
                        <p>Canchas de Asfalto</p>
                    </div>
                    <div class="complex-card" style="background-image: url('cjp.jpg');">
                        <div class="clickable-overlay">
                            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ1GpWHQQiPLKIG7X4TDDUcngRRUAB6Dbo-xM-Ponh2IWTxNwwFnT74l71-bL-toFqDC6b0mAhhu?gv=true" target="_blank" class="court-link-zone" aria-label="Reservar Cancha CJP 1"><span class="zone-text">Reserva Cancha CJP 1</span></a>
                            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ23FAuAAPtwBFxJUeCMMAKAQlZTRGMrX3JGA8s3b0Rl9TOj0du1cb6m1cin96U30DfFV03piwMA?gv=true" target="_blank" class="court-link-zone" aria-label="Reservar Cancha CJP 2"><span class="zone-text">Reserva Cancha CJP 2</span></a>
                        </div>
                    </div>
                </div>
            </div>
            <section class="info-section">
                <h2 class="section-title">Pron√≥stico del Tiempo en Temuco</h2>
                <p class="smart-suggestion" id="smartSuggestion">Analizando el mejor momento para jugar...</p>
                <div class="forecast-container" id="forecast"></div>
            </section>
        </main>
        <footer>
            <div class="tennis-message" id="tennisMessage">Generando frase motivacional...</div>
            <p class="ironic-tip" id="ironicTip"></p>
            <div class="footer-links"><a href="normas.html">Normas de Uso</a></div>
            <div class="small-note">Al finalizar el juego en arcilla pasa el escobill√≥n, barre las l√≠neas y riega la cancha para mantenerla en √≥ptimas condiciones. ¬°Ocupa los basureros! Solo se permite una reserva diaria por socio. ¬°Gracias!</div>
        </footer>
    </div>
    <script>
        const todayElement = document.getElementById('dateToday');
        const today = new Date();
        todayElement.textContent = today.toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        const LAT = -38.7359;
        const LON = -72.5904;
        const members = ["Luis Otth", "Ismael Devia", "Roberto Bermudez", "Roberto Espinoza", "Pablo Lagos", "Francisco Encina", "Gustavo Curaqueo", "Cristian Henriquez", "Cristian Rebolledo", "Sebasti√°n Garrido", "Rodrigo Castro", "Mat√≠as C√°ceres", "Juan Maripill√°n", "David Figueroa", "David Silva", "David Fonseca", "Cristian Farias", "Jaime Castillo", "Jos√© Baeza", "Jos√© Melgarejo", "Miguel Escalona", "Rodrigo Zu√±iga", "Francisco Mu√±oz", "Sebastian Aguilar", "Victor Navarrete", "Cristobal Correa", "Jano Medina", "Miguel Angulo", "Carolina C√°rdenas", "Mauricio Matus", "Ang√©lica Encina", "Maria Jos√©", "Francisco Mendez", "Violeta Moreno", "Valeria Schatter"];
        
        // --- MOTIVATIONAL MESSAGES AMPLIADO ---
        const motivationalMessages = [
            "¬°Hoy es tu d√≠a para brillar en la cancha!", "No hay nada mejor que el sol para llenarnos de energ√≠a. ¬°Vamos a jugar!", 
            "El clima est√° perfecto, no hay excusas. ¬°Dale con todo!", "¬°Vamos a aprovechar el buen tiempo y mejorar ese rev√©s!", 
            "El sol brilla tanto como tu determinaci√≥n. ¬°A la cancha!", "Un d√≠a nublado significa menos calor. ¬°Perfecto para entrenar sin parar!", 
            "Hoy el clima est√° ideal para practicar tus saques. ¬°Hazlo valer!", "No hay mejor clima para mejorar tu t√©cnica. ¬°Aprovecha!", 
            "El sol est√° contigo, igual que tu pasi√≥n por el tenis. ¬°Vamos!", "Nublado pero sin lluvia, ¬°una raz√≥n m√°s para no detenerse!", 
            "Nada mejor que un d√≠a soleado para mostrar de qu√© est√°s hecho.", "El clima perfecto para esos rallies largos. ¬°Vamos a practicar!", 
            "Con este clima, cada punto cuenta. ¬°Vamos con todo!", "Hoy toca darle fuerte, el clima est√° de nuestro lado.", 
            "Aprovecha este d√≠a sin lluvia para dar lo mejor de ti.", "Hoy el sol est√° para acompa√±arte a mejorar. ¬°A la cancha!", 
            "El clima no podr√≠a ser mejor, ¬°a aprovechar cada minuto!", "La victoria est√° en tu mente antes de estar en la cancha.",
            "El tenis es 90% mental y 10% evitar tropezar con la l√≠nea blanca.", "Si pierdes el partido, al menos no pierdas la compostura. Bueno, tal vez un poco.",
            "¬°No culpes a la raqueta! Ella est√° haciendo lo mejor que puede.", "Hoy no se trata de ganar, se trata de no romper otra cuerda.",
            "Si no puedes ganar el punto, al menos haz que tu rival sude por √©l.", "¬øHoy vienes a jugar o a dar un curso de errores no forzados?",
            "Recuerda, el tenis es como la vida: a veces solo intentas no hacer el rid√≠culo.", "¬°Gran saque! L√°stima que fue fuera por medio metro.",
            "Siempre dicen que el esfuerzo lo es todo. Bueno, hoy lo intentaste.", "Tu rev√©s tiene un 50% de probabilidades de ir a la red... optimismo, ¬øno?",
            "Un d√≠a sin tenis es un d√≠a perdido. ¬°A la cancha!", "Con cada golpe, est√°s m√°s cerca de la perfecci√≥n. ¬°Sigue as√≠!",
            "Tu mayor rival no est√° del otro lado de la red, sino en tu mente. ¬°V√©ncelo!", "El clima es perfecto, igual que tu determinaci√≥n. ¬°Dale!",
            "El √©xito es 1% inspiraci√≥n y 99% transpiraci√≥n... ¬°y hoy toca sudar!", "El tenis es el √∫nico deporte donde puedes discutir contigo mismo y perder.",
            "Si la pelota va hacia ti, ¬°corre! Es una pista, no una selfie.", "La raqueta est√° en tus manos, pero la magia viene del caf√© que tomaste antes.",
            "Hoy no jugamos para ganar, sino para demostrar que sabemos correr.", "Tu saque es tan r√°pido que ni t√∫ sabes a d√≥nde va... ¬°sorpresa!",
            "Eres mas malo que el presidente del club.", "cuidado que los mutantes estan ganando todo!", "no robes puntos como Melgarejo!","tambien fuiste atendido por el \"nana vieja\"?",
            // --- NUEVAS FRASES IR√ìNICAS ---
            "Recuerda: la pelota no siempre aterriza donde apuntas. A veces, incluso aterriza en la cancha.",
            "Juega como si nadie te estuviera mirando... porque probablemente nadie lo est√° haciendo bien en ese momento.",
            "El √∫nico error hoy es no culpar a la raqueta, al viento o al sol.",
            "Hoy es un buen d√≠a para practicar tu saque. O para decidir que el p√°del no est√° tan mal despu√©s de todo.",
            "No te preocupes por los errores, la cancha ya ha visto cosas peores. Probablemente ayer, tambi√©n contigo.",
            "¬°√Ånimo! Alg√∫n d√≠a esas pelotas que se van fuera... seguir√°n y√©ndose fuera, pero con m√°s estilo.",
            "La diferencia entre un buen jugador y uno como nosotros es que ellos fallan menos. O lo disimulan mejor.",
            "Si el plan A no funciona, recuerda que el abecedario tiene m√°s letras... y el bar del club tiene otras opciones.",
            "Recuerda, el tenis es como la vida: a veces solo intentas no hacer el rid√≠culo... y a veces lo logras.",
            "Hoy es un d√≠a para darle con todo. Y si no le das a la pelota, al menos dale una buena historia para contar."
        ];

        // --- NUEVO: Array para Consejos Ir√≥nicos ---
        const ironicTennisTips = [
            "Si vas a fallar el saque, que sea con potencia. As√≠ al menos intimidas (o le das a la reja con estilo).",
            "La ropa no hace al jugador, pero ayuda mucho a disimular lo mal que juegas.",
            "Culpar al viento, al sol o a esa pelota que claramente no est√° bien inflada, son t√°cticas subestimadas y siempre v√°lidas.",
            "Si sientes que no est√°s mejorando, no te preocupes. La constancia es clave... para ser consistentemente regular.",
            "Un '¬°vamos!' bien gritado despu√©s de un error garrafal puede confundir a tu oponente. O a ti mismo.",
            "El 'drop shot' es como la loter√≠a: pocas veces toca, pero qu√© alegr√≠a cuando entra (en la cancha, claro).",
            "No importa cu√°ntas veces pierdas, lo importante es que el tercer tiempo siempre se gana."
        ];

        function getWeatherIcon(wmoCode) { const icons = { 0: "‚òÄÔ∏è", 1: "üå§Ô∏è", 2: "‚õÖ", 3: "‚òÅÔ∏è", 45: "üå´Ô∏è", 48: "üå´Ô∏è", 51: "üå¶Ô∏è", 53: "üå¶Ô∏è", 55: "üå¶Ô∏è", 61: "üåßÔ∏è", 63: "üåßÔ∏è", 65: "üåßÔ∏è", 80: "‚õàÔ∏è", 81: "‚õàÔ∏è", 82: "‚õàÔ∏è" }; return icons[wmoCode] || "ü§∑"; }
        
        function updateMotivationalMessage(dailyData = null) { 
            const tennisMessageElement = document.getElementById('tennisMessage'); 
            const currentDay = today.getDay(); 
            const currentHour = today.getHours(); 
            if (currentDay === 0) { tennisMessageElement.textContent = "Las canchas est√°n cerradas los domingos. Aprovecha para descansar y planificar tu pr√≥xima semana de juego."; return; } 
            let rainProbability = 0; 
            if (dailyData) { rainProbability = dailyData.precipitation_probability_max[0]; } 
            if (currentHour >= 7 && currentHour <= 23) { 
                const randomMember = members[Math.floor(Math.random() * members.length)]; 
                const randomMessage = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)]; 
                if (rainProbability > 70) { tennisMessageElement.textContent = `${randomMember}, hoy llueve mucho y las canchas no est√°n en condiciones. Es mejor evitar el riesgo de resbalar.`; 
                } else { tennisMessageElement.textContent = `${randomMember}, ${randomMessage}`; } 
            } else { tennisMessageElement.textContent = "Las canchas est√°n cerradas. ¬°Vuelve ma√±ana para m√°s tenis!"; } 
        }

        // --- NUEVO: Funci√≥n para mostrar Consejo Ir√≥nico ---
        function displayIronicTip() {
            const tipElement = document.getElementById('ironicTip');
            if (tipElement && ironicTennisTips.length > 0) {
                const randomTip = ironicTennisTips[Math.floor(Math.random() * ironicTennisTips.length)];
                tipElement.textContent = `Consejo (no tan) √∫til del d√≠a: ${randomTip}`;
            }
        }
        
        async function fetchWeather() { 
            const forecastDiv = document.getElementById('forecast'); 
            const suggestionEl = document.getElementById('smartSuggestion'); 
            const URL = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max&hourly=precipitation_probability&timezone=America/Santiago`; 
            let dailyData = null; 
            try { 
                const response = await fetch(URL); 
                if (!response.ok) throw new Error(`Error de red: ${response.statusText}`); 
                const data = await response.json(); 
                dailyData = data.daily; 
                forecastDiv.innerHTML = ""; 
                for (let i = 0; i < dailyData.time.length; i++) { 
                    const date = new Date(dailyData.time[i] + 'T00:00:00'); 
                    const dayString = new Intl.DateTimeFormat('es-ES', { weekday: 'short' }).format(date).replace(/^\w/, c => c.toUpperCase()); 
                    const icon = getWeatherIcon(dailyData.weathercode[i]); 
                    forecastDiv.innerHTML += `<div class="forecast-day"><span>${dayString}</span><div class="weather-icon-emoji">${icon}</div><span>M√°x: ${Math.round(dailyData.temperature_2m_max[i])}¬∞C</span><span>M√≠n: ${Math.round(dailyData.temperature_2m_min[i])}¬∞C</span><span>${dailyData.precipitation_probability_max[i]}% lluvia</span></div>`; 
                } 
                const hourlyData = data.hourly; 
                let bestTimeFound = false; 
                for (let i = 0; i < hourlyData.time.length; i++) { 
                    const hourDate = new Date(hourlyData.time[i]); 
                    if (!bestTimeFound && hourDate > today) { 
                        if (hourDate.getHours() >= 8 && hourDate.getHours() <= 21 && hourlyData.precipitation_probability[i] < 15) { 
                            const hourString = new Intl.DateTimeFormat('es-ES', { hour: '2-digit', minute: '2-digit', hour12: false }).format(hourDate); 
                            // --- MODIFICADO: "La Cancha Opina" para la sugerencia ---
                            const courtOpinions = [
                                `La Cancha ${ (Math.random() < 0.5 ? "CEC 1" : "CJP 2") } te gui√±a un ojo. Dice que a las ${hourString} hrs est√° despejada y lista para tus (intentos de) dejadas.`,
                                `Parece que a las ${hourString} hrs hay una ventana perfecta. ¬°Las canchas esperan tu saque (dentro, por favor)!`,
                                `A las ${hourString} hrs el clima dice 's√≠'. La cancha dice 'tr√°eme tus mejores errores no forzados'.`
                            ];
                            suggestionEl.textContent = courtOpinions[Math.floor(Math.random() * courtOpinions.length)];
                            bestTimeFound = true; 
                        } 
                    } 
                } 
                if (!bestTimeFound) { 
                    const noTimeOpinions = [
                        "Uf, parece que hoy el clima en Temuco est√° m√°s complicado que explicarle el fuera de juego a tu t√≠a. Revisa bien el pron√≥stico.",
                        "Las canchas est√°n en modo 'mejor otro d√≠a'. El clima no coopera para una exhibici√≥n de tu talento.",
                        "Hoy el pron√≥stico sugiere que es un d√≠a perfecto para... ver tenis en la tele. O afilar la raqueta."
                    ];
                    suggestionEl.textContent = noTimeOpinions[Math.floor(Math.random() * noTimeOpinions.length)]; 
                } 
                // Si hay lluvia fuerte, sobreescribir la opini√≥n
                if (dailyData && dailyData.precipitation_probability_max[0] > 70) {
                     suggestionEl.textContent = `La Cancha ${(Math.random() < 0.5 ? "CEC" : "CJP")} sugiere que hoy te dediques al waterpolo. ¬°Est√° lloviendo a c√°ntaros!`;
                }

            } catch (error) { 
                console.error("Error al cargar el clima:", error); 
                suggestionEl.textContent = "No se pudo cargar la informaci√≥n del clima... quiz√°s los dioses del tenis est√°n ocupados."; 
                forecastDiv.innerHTML = "<p>El pron√≥stico no est√° disponible. Intenta de nuevo o asume que es d√≠a de descanso.</p>"; 
            } finally { 
                updateMotivationalMessage(dailyData); 
                displayIronicTip(); // --- NUEVO: Mostrar consejo ir√≥nico ---
            } 
        }
        fetchWeather(); 
        setInterval(fetchWeather, 60 * 60 * 1000);
    </script>
    
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js').then(registration => {
            console.log('SW registrado: ', registration);
          }).catch(registrationError => {
            console.log('SW registro fall√≥: ', registrationError);
          });
        });
      }
    </script>
</body>
</html>
