<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canchas de Tenis UCT</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #FFFFFF;
            color: black;
            text-align: center;
        }

        .container {
            max-width: 90%;
            margin: 20px auto;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            color: black;
        }

        h1 {
            color: #0066CC;
            font-size: 20px;
        }

        .date-today {
            margin: 5px 0;
            font-size: 14px;
            color: #555;
            font-weight: bold;
        }

        .tennis-message {
            margin: 15px 0;
            font-size: 16px;
            color: #007700;
            font-weight: bold;
        }

        img {
            max-width: 100%;
            border-radius: 10px;
            margin: 15px 0;
        }

        .buttons {
            margin: 10px 0;
        }

        .calendar-button {
            background-color: #0099FF;
            color: white;
            font-size: 14px;
            font-weight: bold;
            padding: 8px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            width: calc(50% - 10px);
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .calendar-button:hover {
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .forecast-title {
            font-size: 18px;
            color: #004D70;
            margin-top: 15px;
        }

        .forecast {
            margin-top: 10px;
            background: #F8FCFF;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            overflow-x: auto;
            gap: 10px;
        }

        .forecast-day {
            flex: 0 0 90px;
            background: #B3E5FC;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 8px;
            text-align: center;
            color: #004D70;
        }

        .forecast-day img {
            width: 40px;
            height: 40px;
            margin: 5px 0;
        }

        .forecast-day span {
            display: block;
            font-size: 11px;
            margin-top: 3px;
        }

        .small-note {
            margin-top: 10px;
            font-size: 12px;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Canchas de Tenis UCT</h1>
        <div class="date-today" id="dateToday"></div>
        <p>Selecciona la cancha que deseas reservar:</p>
        <img src="cec.jpg" alt="Canchas de tenis">

        <div class="buttons">
            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ1pS98lJc9AnurRJsrrFELO8p7lFqT8SE5tpaJPiVixBHN83PpSWM4oqIfom2EAtwcVqooJYG7K?gv=true" class="calendar-button">Cancha 1</a>
            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ1ijnDghWGh6GVpsD6Q76qxlJqEdDhj9E0MvboyNI_rTAkbn0JfXE3qFoYECfCMjyEPSGpaTRk4?gv=true" class="calendar-button">Cancha 2</a>
        </div>

        <div class="small-note">
            Cada franja tiene una duraciÃ³n de 90 minutos, incluyendo el tiempo necesario para pasar el escobillÃ³n y regar la cancha, asegurando su mantenimiento en Ã³ptimas condiciones. Â¡Gracias por tu colaboraciÃ³n!
        </div>

        <h2 class="forecast-title">Â¿Y el clima?</h2>
        <div class="forecast" id="forecast">
            <!-- PronÃ³stico generado dinÃ¡micamente -->
        </div>

        <!-- Frase Motivacional -->
        <div class="tennis-message" id="tennisMessage">Generando frase motivacional...</div>
    </div>

    <script>
        // Mostrar la fecha de hoy
        const todayElement = document.getElementById('dateToday');
        const today = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        todayElement.textContent = today.toLocaleDateString('es-ES', options);

        // PronÃ³stico del tiempo con Tomorrow.io
        const API_KEY_TOMORROW = "ID7bqddtJYbEtDNxshQl9I5xfhJ72Ufb";
        const LAT = -38.7359; // Latitud de Temuco
        const LON = -72.5904; // Longitud de Temuco

        async function fetchWeather() {
            try {
                const response = await fetch(`https://api.tomorrow.io/v4/timelines?location=${LAT},${LON}&fields=temperatureMax,temperatureMin,precipitationProbability,cloudCover&units=metric&timesteps=1d&apikey=${API_KEY_TOMORROW}`);
                const data = await response.json();
                const forecastDiv = document.getElementById('forecast');

                // Obtener pronÃ³stico de 7 dÃ­as
                const dailyData = data.data.timelines[0].intervals.slice(0, 7);
                dailyData.forEach(day => {
                    const date = new Date(day.startTime);
                    const options = { weekday: 'short', day: 'numeric' };
                    const dayString = date.toLocaleDateString('es-ES', options);

                    const tempMax = Math.round(day.values.temperatureMax);
                    const tempMin = Math.round(day.values.temperatureMin);
                    const rain = Math.round(day.values.precipitationProbability);
                    const cloudCover = Math.round(day.values.cloudCover);

                    const icon = getWeatherIcon(cloudCover, rain);

                    forecastDiv.innerHTML += `
                        <div class="forecast-day">
                            <span>${dayString}</span>
                            <span style="font-size: 30px;">${icon}</span>
                            <span>MÃ¡x: ${tempMax}Â°C</span>
                            <span>MÃ­n: ${tempMin}Â°C</span>
                            <span>${rain}% lluvia</span>
                        </div>
                    `;
                });

                // Actualizar mensaje motivacional con base en el pronÃ³stico
                updateMotivationalMessage(dailyData);
            } catch (error) {
                document.getElementById('forecast').innerHTML = "No se pudo cargar el pronÃ³stico del tiempo.";
            }
        }

        // FunciÃ³n para asignar Ã­conos dinÃ¡micos
        const getWeatherIcon = (cloudCover, rainProbability) => {
            if (rainProbability > 70) return "ðŸŒ§ï¸"; // Lluvia intensa
            if (rainProbability > 30) return "ðŸŒ¦ï¸"; // Lluvia ligera
            if (cloudCover > 70) return "â˜ï¸"; // Nublado
            if (cloudCover > 30) return "â›…"; // Parcialmente nublado
            return "â˜€ï¸"; // Soleado
        };

        // Actualizar mensaje motivacional segÃºn el clima
        function updateMotivationalMessage(forecast) {
            const tennisMessageElement = document.getElementById('tennisMessage');
            const currentHour = new Date().getHours();
            
            // Obtener el pronÃ³stico de hoy
            const todayForecast = forecast[0];
            const rainProbability = Math.round(todayForecast.values.precipitationProbability);
            const cloudCover = Math.round(todayForecast.values.cloudCover);

            let message = "";

            if (currentHour >= 7 && currentHour <= 23) {
                // Mensajes adaptados segÃºn el clima
                if (rainProbability > 70) {
                    message = "Hoy llueve mucho, es mejor evitar las canchas y planificar otra actividad.";
                } else if (rainProbability > 30) {
                    message = "Parece que puede llover un poco. Â¡No olvides llevar toalla por si acaso!";
                } else if (cloudCover > 70) {
                    message = "El dÃ­a estÃ¡ nublado, lo que puede ser perfecto para evitar el sol fuerte. Â¡Vamos a jugar!";
                } else if (cloudCover > 30) {
                    message = "Con un clima parcialmente nublado, Â¡disfruta sin preocuparte por el sol intenso!";
                } else {
                    message = "Un dÃ­a soleado perfecto para jugar tenis. Â¡Recuerda mantenerte hidratado!";
                }

                // AÃ±adir mensaje personalizado segÃºn el grupo
                const groupMessages = [
                    "Luis Otth, Â¡hoy toca darlo todo en la cancha, aunque seas malo por naturaleza!",
                    "Ismael Devia, Â¡el clima estÃ¡ ideal para practicar tu revÃ©s!",
                    "Roberto Bermudez, Â¡hoy es un buen dÃ­a para mejorar tu saque!",
                    "Roberto Espinoza, Â¡aprovecha este dÃ­a y diviÃ©rtete!",
                    "Pablo Lagos, Â¡es un gran dÃ­a para el tenis, vamos con todo!",
                    "Francisco Encina, Â¡cada punto cuenta, da lo mejor!",
                    "Gustavo Curaqueo, Â¡mantente enfocado, hoy es tu dÃ­a!",
                    "Cristian Henriquez, Â¡concentraciÃ³n y disciplina, vamos a ganar!",
                    "Cristian Rebolledo, Â¡el clima te acompaÃ±a, demuestra tu mejor juego!",
                    "SebastiÃ¡n Garrido, Â¡hoy tienes una cita con la victoria!",
                    "Rodrigo Castro, Â¡jugar bajo el sol nunca fue tan divertido!",
                    "MatÃ­as CÃ¡ceres, Â¡las nubes no te detendrÃ¡n hoy!",
                    "Juan MaripillÃ¡n, Â¡es un buen dÃ­a para un partido de dobles!",
                    "David Figueroa, Â¡llueva o truene, el tenis sigue adelante!",
                    "David Silva, Â¡hoy el dÃ­a estÃ¡ perfecto para jugar y mejorar!",
                    "David Fonseca, Â¡practicar cada dÃ­a te lleva mÃ¡s cerca de la perfecciÃ³n!",
                    "Cristian Farias, Â¡no hay mejor motivaciÃ³n que el buen clima!",
                    "Jaime Castillo, Â¡el sol estÃ¡ contigo, aprovecha cada segundo!",
                    "JosÃ© Baeza, Â¡recuerda siempre calentar bien antes de jugar!",
                    "JosÃ© Melgarejo, Â¡hoy es un buen dÃ­a para nuevos desafÃ­os!",
                    "Miguel Escalona, Â¡la cancha estÃ¡ lista para ti, no pierdas la oportunidad!",
                    "Norman Gatica, Â¡aprovecha el dÃ­a y diviÃ©rtete con el tenis!",
                    "Francisco MuÃ±oz, Â¡mantÃ©n el foco en tu objetivo, nada te detiene!",
                    "Sebastian Aguilar, Â¡es un gran momento para mejorar tus voleas!",
                    "Victor Navarrete, Â¡no te olvides de disfrutar cada punto!",
                    "Cristobal Correa, Â¡dale con todo, cada dÃ­a es una oportunidad para ser mejor!",
                    "Rodrigo Vergara, Â¡mantÃ©n la concentraciÃ³n y disfruta del partido!",
                    "Luis Otth, Â¡hoy el clima estÃ¡ de tu lado, da lo mejor!",
                    "Marcos Silva, Â¡es el momento de trabajar en tu revÃ©s!",
                    "Felipe GonzÃ¡lez, Â¡hoy es el dÃ­a para sorprender en la cancha!",
                    "AndrÃ©s Morales, Â¡con cada golpe mejoras, sigue asÃ­!",
                    "Ricardo Paredes, Â¡el clima estÃ¡ ideal para un gran partido!",
                    "RaÃºl FernÃ¡ndez, Â¡nada como el tenis en un dÃ­a como hoy!",
                    "Alejandro Rojas, Â¡aprovecha este clima y mejora tu saque!",
                    "MartÃ­n Reyes, Â¡el esfuerzo de hoy serÃ¡ tu triunfo de maÃ±ana!",
                    "Gonzalo PÃ©rez, Â¡cada punto es una oportunidad, da lo mejor!",
                    "Jorge RamÃ­rez, Â¡concentraciÃ³n y determinaciÃ³n en cada golpe!",
                    "Eduardo Soto, Â¡el sol estÃ¡ de tu lado, disfruta el partido!"
                ];

                // Combinar mensaje climÃ¡tico con mensaje personalizado
                const randomIndex = Math.floor(Math.random() * groupMessages.length);
                message += " " + groupMessages[randomIndex];
            } else {
                message = "Las canchas estÃ¡n cerradas. Â¡Vuelve maÃ±ana para mÃ¡s tenis!";
            }

            tennisMessageElement.textContent = message;
        }

        // Mostrar mensaje cada hora
        setInterval(fetchWeather, 60 * 60 * 1000); // Actualizar cada hora

        // Obtener el clima inicialmente y actualizar el mensaje motivacional
        fetchWeather();
    </script>
</body>
</html>
