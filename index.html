<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canchas de Tenis UCT</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #FFFFFF;
            color: black;
            text-align: center;
        }

        .container {
            max-width: 90%;
            margin: 20px auto;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            color: black;
        }

        h1 {
            color: #0066CC;
            font-size: 20px;
        }

        .date-today {
            margin: 5px 0;
            font-size: 14px;
            color: #555;
            font-weight: bold;
        }

        .tennis-message {
            margin: 15px 0;
            font-size: 16px;
            color: #007700;
            font-weight: bold;
        }

        img {
            max-width: 100%;
            border-radius: 10px;
            margin: 15px 0;
        }

        .buttons {
            margin: 10px 0;
        }

        .calendar-button {
            background-color: #0099FF;
            color: white;
            font-size: 14px;
            font-weight: bold;
            padding: 8px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            width: calc(50% - 10px);
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .calendar-button:hover {
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }

        .forecast-title {
            font-size: 18px;
            color: #004D70;
            margin-top: 15px;
        }

        .forecast {
            margin-top: 10px;
            background: #F8FCFF;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            overflow-x: auto;
            gap: 10px;
        }

        .forecast-day {
            flex: 0 0 90px;
            background: #B3E5FC;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 8px;
            text-align: center;
            color: #004D70;
        }

        .forecast-day img {
            width: 40px;
            height: 40px;
            margin: 5px 0;
        }

        .forecast-day span {
            display: block;
            font-size: 11px;
            margin-top: 3px;
        }

        .small-note {
            margin-top: 10px;
            font-size: 12px;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Canchas de Tenis UCT</h1>
        <div class="date-today" id="dateToday"></div>
        <p>Selecciona la cancha que deseas reservar:</p>
        <img src="cec.jpg" alt="Canchas de tenis">

        <div class="buttons">
            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ1pS98lJc9AnurRJsrrFELO8p7lFqT8SE5tpaJPiVixBHN83PpSWM4oqIfom2EAtwcVqooJYG7K?gv=true" class="calendar-button">Cancha 1</a>
            <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ1ijnDghWGh6GVpsD6Q76qxlJqEdDhj9E0MvboyNI_rTAkbn0JfXE3qFoYECfCMjyEPSGpaTRk4?gv=true" class="calendar-button">Cancha 2</a>
        </div>

        <div class="small-note">
            Al finalizar el juego, pasa el escobillón y riega la cancha para mantenerla en óptimas condiciones. ¡Gracias!
        </div>

        <h2 class="forecast-title">¿Y el clima?</h2>
        <div class="forecast" id="forecast">
            <!-- Pronóstico generado dinámicamente -->
        </div>

        <!-- Frase Motivacional -->
        <div class="tennis-message" id="tennisMessage">Generando frase motivacional...</div>
    </div>

    <script>
        // Mostrar la fecha de hoy
        const todayElement = document.getElementById('dateToday');

        const today = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        todayElement.textContent = today.toLocaleDateString('es-ES', options);

        // Pronóstico del tiempo con Tomorrow.io (conservando funcionalidad original)
        const API_KEY_TOMORROW = "ID7bqddtJYbEtDNxshQl9I5xfhJ72Ufb";
        const LAT = -38.7359; // Latitud de Temuco
        const LON = -72.5904; // Longitud de Temuco

        async function fetchWeather() {
            try {
                const response = await fetch(`https://api.tomorrow.io/v4/timelines?location=${LAT},${LON}&fields=temperatureMax,temperatureMin,precipitationProbability,cloudCover&units=metric&timesteps=1d&apikey=${API_KEY_TOMORROW}`);
                const data = await response.json();
                const forecastDiv = document.getElementById('forecast');
                const tennisMessageElement = document.getElementById('tennisMessage');

                // Obtener pronóstico de 7 días
                const dailyData = data.data.timelines[0].intervals.slice(0, 7);

                dailyData.forEach(day => {
                    const date = new Date(day.startTime);
                    const options = { weekday: 'short', day: 'numeric' };
                    const dayString = date.toLocaleDateString('es-ES', options);

                    const tempMax = Math.round(day.values.temperatureMax);
                    const tempMin = Math.round(day.values.temperatureMin);
                    const rain = Math.round(day.values.precipitationProbability);
                    const cloudCover = Math.round(day.values.cloudCover);

                    const icon = getWeatherIcon(cloudCover, rain);

                    forecastDiv.innerHTML += `
                        <div class="forecast-day">
                            <span>${dayString}</span>
                            <span style="font-size: 30px;">${icon}</span>
                            <span>Máx: ${tempMax}°C</span>
                            <span>Mín: ${tempMin}°C</span>
                            <span>${rain}% lluvia</span>
                        </div>
                    `;
                });

                // Obtener los datos de hoy
                const todayWeather = dailyData[0].values;
                const rainProbability = todayWeather.precipitationProbability;
                const cloudCover = todayWeather.cloudCover;

                // Mensajes motivacionales
                const messages = [
                    "Hoy llueve mucho, es mejor evitar las canchas y planificar otra actividad.",
                    "Parece que puede llover un poco. ¡No olvides llevar toalla por si acaso!",
                    "El día está nublado, lo que puede ser perfecto para evitar el sol fuerte. ¡Vamos a jugar!",
                    "Con un clima parcialmente nublado, ¡disfruta sin preocuparte por el sol intenso!",
                    "Un día soleado perfecto para jugar tenis. ¡Recuerda mantenerte hidratado!",
                    "Es domingo, y las reservas están cerradas. ¡Nos vemos mañana!",
                    "¡Luis Otth, eres malo igual!",
                    "¡Ismael Devia, el clima está perfecto para practicar tus saques!",
                    "Roberto Bermudez, ¡aprovecha el día y mejora tu juego en la red!",
                    "Roberto Espinoza, ¡hoy es ideal para poner en práctica el revés!",
                    "Pablo Lagos, ¡a disfrutar del sol y el buen tenis!",
                    "Francisco Encina, ¡hoy es el día para ganar cada punto!",
                    "Gustavo Curaqueo, ¡recuerda mantenerte enfocado en cada golpe!",
                    "Cristian Henriquez, ¡con nubes o sin nubes, siempre hacia adelante!",
                    "Cristian Rebolledo, ¡no dejes que el clima te detenga, es momento de brillar!",
                    "Sebastián Garrido, ¡dale con todo hoy, nada te detiene!",
                    "Rodrigo Castro, ¡la cancha te espera, haz que cada golpe cuente!",
                    "Matías Cáceres, ¡es un buen día para practicar esos voleas!",
                    "Juan Maripillán, ¡hoy toca divertirse bajo el sol!",
                    "David Figueroa, ¡llueva o truene, la pasión por el tenis no se apaga!",
                    "David Silva, ¡demuestra de qué estás hecho, el clima está a tu favor!",
                    "David Fonseca, ¡es un buen día para un buen partido!",
                    "Cristian Farias, ¡el esfuerzo siempre trae recompensas!",
                    "Jaime Castillo, ¡las nubes no son excusa, la cancha está lista!",
                    "José Baeza, ¡hoy es un gran día para mejorar tu saque!",
                    "José Melgarejo, ¡mantén la concentración y juega tu mejor tenis!",
                    "Miguel Escalona, ¡nada como una cancha y buen clima para triunfar!",
                    "Norman Gatica, ¡el sol está a tu favor, aprovecha!",
                    "Francisco Muñoz, ¡cada partido es una oportunidad para aprender!",
                    "Sebastian Aguilar, ¡la cancha te espera, da lo mejor de ti!",
                    "Victor Navarrete, ¡es un día genial para practicar la técnica!",
                    "Cristobal Correa, ¡hoy toca disfrutar cada punto, el clima acompaña!",
                    "¡Vamos equipo, juntos podemos vencer cualquier clima!",
                    "No olvides estirar antes del partido, especialmente en días fríos.",
                    "La cancha está un poco húmeda, ten cuidado con los resbalones.",
                    "Si el sol está muy fuerte, toma descansos para mantenerte fresco.",
                    "Las condiciones son perfectas para un gran partido, ¡a disfrutar!",
                    "Recuerda: el tenis es 50% mental. ¡Mantén la calma y concéntrate!",
                    "¡Aprovecha la mañana para jugar, antes de que el clima cambie!"
                ];

                // Seleccionar mensaje basado en el clima o situación especial
                let message = "";

                if (rainProbability > 70) {
                    message = messages[0];
                } else if (rainProbability > 30) {
                    message = messages[1];
                } else if (cloudCover > 70) {
                    message = messages[2];
                } else if (cloudCover > 30) {
                    message = messages[3];
                } else {
                    message = messages[4];
                }

                // Si es domingo, dar un mensaje especial
                if (today.getDay() === 0) {
                    message = messages[5];
                }

                // Mensaje especial para miembros
                const memberNames = [
                    "Luis Otth", "Ismael Devia", "Roberto Bermudez", "Roberto Espinoza Cortés", "Pablo Lagos",
                    "Francisco Encina Montoya", "Gustavo Curaqueo Fuentes", "Cristian Henriquez Henriquez", 
                    "Cristian Rebolledo", "Sebastián Garrido Reyes", "Rodrigo Castro Salas", "Matías Cáceres", 
                    "Juan Maripillán Muñoz", "David Figueroa", "David Silva", "David Fonseca", "Cristian Farias",
                    "Jaime Castillo", "José Baeza", "José Melgarejo", "Miguel Escalona", "Norman Gatica",
                    "Francisco Muñoz", "Sebastian Aguilar", "Victor Navarrete", "Cristobal Correa"
                ];

                memberNames.forEach((member, index) => {
                    if (message.includes(member)) {
                        message = messages[6 + index];
                    }
                });

                // Mostrar el mensaje final
                tennisMessageElement.textContent = message;

            } catch (error) {
                document.getElementById('forecast').innerHTML = "No se pudo cargar el pronóstico del tiempo.";
                document.getElementById('tennisMessage').textContent = "No se pudo generar una frase en este momento. Inténtalo más tarde.";
            }
        }

        // Función para asignar íconos dinámicos
        const getWeatherIcon = (cloudCover, rainProbability) => {
            if (rainProbability > 70) return "🌧️"; // Lluvia intensa
            if (rainProbability > 30) return "🌦️"; // Lluvia ligera
            if (cloudCover > 70) return "☁️"; // Nublado
            if (cloudCover > 30) return "⛅"; // Parcialmente nublado
            return "☀️"; // Soleado
        };

        fetchWeather();
    </script>
</body>
</html>

